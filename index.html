<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Trilogy: An Animated Deep Dive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        @keyframes text-shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOutDown {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(10px); }
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 15px rgba(255, 255, 255, 0.1); }
            50% { box-shadow: 0 0 25px rgba(255, 255, 255, 0.25); }
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Base Styles */
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; background-color: #000; color: #E0E0E0; overflow: hidden; }
        .container { scroll-snap-type: y mandatory; overflow-y: scroll; height: 100vh; }
        .container::-webkit-scrollbar { display: none; }
        .section { height: 100vh; width: 100vw; }
        .content-wrapper { height: 90vh; overflow-y: auto; }

        /* Shared Styles */
        .section { display: flex; align-items: center; justify-content: center; position: relative; scroll-snap-align: start; overflow: hidden; }
        .background-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; transition: transform 1.5s cubic-bezier(0.25, 1, 0.5, 1), opacity 1.5s ease-out; transform: scale(1.25); opacity: 0.15; }
        .section.active .background-image { transform: scale(1); opacity: 0.25; }
        .vignette { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(ellipse at center, rgba(0,0,0,0) 40%, rgba(0,0,0,1) 100%); z-index: 2; }
        .content-wrapper { position: relative; z-index: 10; width: 100%; max-width: 1000px; padding: 2rem 1rem; }
        @media (min-width: 640px) {
            .content-wrapper {
                padding: 2rem;
            }
        }
        .content-wrapper::-webkit-scrollbar { width: 6px; }
        .content-wrapper::-webkit-scrollbar-track { background: transparent; }
        .content-wrapper::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.15); border-radius: 3px; }
        .content-wrapper::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.3); }
        .album-art { border-radius: 12px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.85); transition: transform 0.5s ease, box-shadow 0.5s ease; border: 1px solid rgba(255, 255, 255, 0.1); margin: 1.5rem auto 0 auto; }
        .album-art:hover { transform: scale(1.03) translateY(-5px); box-shadow: 0 35px 60px -15px rgba(0, 0, 0, 1); }
        
        /* Title Styles */
        .fancy-title { font-weight: 900; color: transparent; background-clip: text; -webkit-background-clip: text; }
        .title-main { background-image: linear-gradient(to right, #808080, #ef4444, #f59e0b, #808080); animation: text-shimmer 6s linear infinite; background-size: 300% auto;}
        .title-hob { background-image: linear-gradient(to right, #b3b3b3, #666666, #b3b3b3); animation: text-shimmer 5s linear infinite; background-size: 200% auto;}
        .title-thu { background-image: linear-gradient(to right, #ef4444, #b91c1c, #ef4444); animation: text-shimmer 5s linear infinite; background-size: 200% auto;}
        .title-eos { background-image: linear-gradient(to right, #facc15, #f59e0b, #facc15); animation: text-shimmer 5s linear infinite; background-size: 200% auto;}

        details { background: rgba(0, 0, 0, 0.2); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; margin-bottom: 1rem; transition: all 0.4s ease; text-align: left; }
        details[open] { border-color: rgba(167, 139, 250, 0.7); box-shadow: 0 0 20px rgba(167, 139, 250, 0.1); }
        summary { list-style: none; cursor: pointer; padding: 1rem 1.5rem; font-weight: 700; font-size: 1.1rem; display: flex; justify-content: space-between; align-items: center; }
        summary::-webkit-details-marker { display: none; }
        summary::after { content: '+'; font-size: 2rem; color: #a78bfa; transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1), content 0.4s; }
        details[open] summary::after { content: 'âˆ’'; transform: none; color: #c4b5fd; }
        .details-content { padding: 0 1.5rem 1.5rem 1.5rem; line-height: 1.7; color: #b0b0b0; }
        details[open] .details-content { animation: fadeInUp 0.5s ease-in-out; }
        details .details-content.collapsing { animation: fadeOutDown 0.3s ease-in-out forwards; }
        .details-content p { margin-bottom: 1rem; }
        .analysis-heading { font-weight: 900; font-size: 1.1rem; margin-top: 1.5rem; margin-bottom: 0.5rem; color: #c4b5fd; text-transform: uppercase; letter-spacing: 0.05em; }
        
        /* Navigation Styles */
        #page-nav { position: fixed; top: 50%; right: 1.5rem; transform: translateY(-50%); z-index: 1000; }
        .nav-bar-container { 
            display: flex; flex-direction: column; align-items: center; gap: 1.5rem;
            padding: 0.75rem;
            border-radius: 9999px;
            background-color: rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
            animation: pulse-glow 4s infinite ease-in-out;
        }
        .nav-bar {
            width: 10px; height: 90px;
            border-radius: 5px; cursor: pointer; border: none;
            display: flex; flex-direction: column; overflow: hidden;
            padding: 0;
            transition: filter 0.5s ease, transform 0.3s ease;
            filter: grayscale(80%) brightness(0.5);
        }
        .nav-bar.active {
            filter: grayscale(0%) brightness(1);
            transform: scale(1.1);
        }
        .nav-bar:hover {
             filter: grayscale(0%) brightness(1);
        }
        .color-block {
            width: 100%;
            flex-grow: 1;
        }
        #nav-return-top {
            width: 12px; height: 12px; border-radius: 50%; background-color: #fff;
            opacity: 0.5; transition: opacity 0.3s ease, transform 0.3s ease;
        }
        #nav-return-top.active {
            opacity: 1;
            transform: scale(1.2);
        }
        #nav-return-top:hover {
            opacity: 1;
        }

        /* Intro Slide Album Art Hover */
        .album-choice-link .album-art {
             transition: transform 0.4s ease, box-shadow 0.4s ease;
        }
        .album-choice-link:hover .album-art {
            transform: scale(1.05) translateY(-10px) perspective(1000px) rotateX(5deg);
        }
        .album-choice-link:nth-child(1):hover .album-art { box-shadow: 0 40px 50px -20px rgba(179, 179, 179, 0.3); }
        .album-choice-link:nth-child(2):hover .album-art { box-shadow: 0 40px 50px -20px rgba(239, 68, 68, 0.3); }
        .album-choice-link:nth-child(3):hover .album-art { box-shadow: 0 40px 50px -20px rgba(245, 158, 11, 0.3); }


        .reveal { opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .section.active .reveal { opacity: 1; transform: translateY(0); }
        .section.active .reveal-1 { transition-delay: 0.2s; }
        .section.active .reveal-2 { transition-delay: 0.4s; }
        .section.active .reveal-3 { transition-delay: 0.6s; }
        .section.active .reveal-4 { transition-delay: 0.8s; }
    </style>
</head>
<body>

<!-- Navigation Element -->
<nav id="page-nav">
    <div class="nav-bar-container">
        <button class="nav-button" id="nav-return-top" data-target="#intro"></button>
        <button class="nav-bar" id="nav-bar-hob" data-target="#hob">
            <div class="color-block" style="background-color: #333333;"></div>
            <div class="color-block" style="background-color: #4d4d4d;"></div>
            <div class="color-block" style="background-color: #666666;"></div>
            <div class="color-block" style="background-color: #808080;"></div>
            <div class="color-block" style="background-color: #999999;"></div>
            <div class="color-block" style="background-color: #b3b3b3;"></div>
        </button>
        <button class="nav-bar" id="nav-bar-thu" data-target="#thursday">
            <div class="color-block" style="background-color: #7f1d1d;"></div>
            <div class="color-block" style="background-color: #991b1b;"></div>
            <div class="color-block" style="background-color: #b91c1c;"></div>
            <div class="color-block" style="background-color: #dc2626;"></div>
            <div class="color-block" style="background-color: #ef4444;"></div>
            <div class="color-block" style="background-color: #f87171;"></div>
        </button>
        <button class="nav-bar" id="nav-bar-eos" data-target="#eos">
            <div class="color-block" style="background-color: #facc15;"></div>
            <div class="color-block" style="background-color: #f9a825;"></div>
            <div class="color-block" style="background-color: #f59e0b;"></div>
            <div class="color-block" style="background-color: #d97706;"></div>
            <div class="color-block" style="background-color: #b45309;"></div>
            <div class="color-block" style="background-color: #92400e;"></div>
            <div class="color-block" style="background-color: #78350f;"></div>
        </button>
    </div>
</nav>

<div class="container">

    <!-- Section 0: Intro / Overture -->
    <section id="intro" class="section active">
        <img src="https://i.postimg.cc/1tSfgYSt/67c10c9cafeca5dfdad75f94a37480c6.jpg"
             alt="A moody, black and white photo of The Weeknd." class="background-image"
             onerror="this.onerror=null;this.src='https://placehold.co/1920x1080/000000/333333?text=Image+Not+Found';">
        <div class="vignette"></div>
        <div class="content-wrapper">
            <div class="text-center py-8">
                <div>
                    <h1 class="text-4xl sm:text-5xl md:text-7xl font-black fancy-title title-main reveal reveal-1">The Trilogy</h1>
                    <h2 class="text-xl sm:text-2xl md:text-3xl text-gray-300 reveal reveal-2">A Narrative Deep Dive</h2>
                    <p class="text-base sm:text-lg text-gray-400 mt-6 max-w-3xl mx-auto reveal reveal-3">
                        The Weeknd's <em>Trilogy</em> is a cohesive three-act tragedy charting a modern-day Icarus's rise and fall. It begins with <em>House of Balloons</em>, an intoxicating invitation into a world of hedonism. This descent continues in <em>Thursday</em>, where the thrill sours into cynical routine. Finally, <em>Echoes of Silence</em> serves as the brutal comedown, leaving the protagonist to confront the hollow emptiness his actions have wrought.
                    </p>
                </div>
                <div class="mt-8 sm:mt-12 reveal reveal-4">
                    <h3 class="text-lg sm:text-xl font-bold text-gray-400 mb-6">Select an Act</h3>
                    <div class="flex flex-col md:flex-row justify-center items-center gap-4 sm:gap-8">
                        <a href="#hob" class="album-choice-link">
                            <img src="https://t2.genius.com/unsafe/1458x0/https%3A%2F%2Fimages.genius.com%2Fda5c113dd66b79605b1a74911dbb4576.1000x1000x1.png" alt="House of Balloons Album Art" class="w-28 h-28 sm:w-36 sm:h-36 md:w-48 md:h-48 album-art">
                        </a>
                        <a href="#thursday" class="album-choice-link">
                            <img src="https://t2.genius.com/unsafe/1458x0/https%3A%2F%2Fimages.genius.com%2Fa83a29dd26a6e4fe50bba0ef25c7bb19.1000x1000x1.png" alt="Thursday Album Art" class="w-28 h-28 sm:w-36 sm:h-36 md:w-48 md:h-48 album-art">
                        </a>
                        <a href="#eos" class="album-choice-link">
                            <img src="https://t2.genius.com/unsafe/1458x0/https%3A%2F%2Fimages.genius.com%2F1d4e1b8dd401906009d931e7a7c6a3bb.1000x1000x1.png" alt="Echoes of Silence Album Art" class="w-28 h-28 sm:w-36 sm:h-36 md:w-48 md:h-48 album-art">
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 1: House of Balloons -->
    <section id="hob" class="section">
        <img src="https://i.postimg.cc/hPyt0tLV/1fbc6a0550a980fa1a20a765da118f99.jpg"
             alt="A grainy, black and white photo of a person amidst balloons in a bathtub." class="background-image"
             onerror="this.onerror=null;this.src='https://placehold.co/1920x1080/000000/333333?text=Image+Not+Found';">
        <div class="vignette"></div>
        <div class="content-wrapper">
            <div class="text-center">
                <h1 class="text-5xl md:text-7xl fancy-title title-hob reveal reveal-1">House of Balloons</h1>
                <p class="text-lg text-gray-300 mt-4 max-w-xl mx-auto reveal reveal-2">The invitation to the party. The protagonist, young and nihilistic, lures the listener into his world of drugs and casual sex. The "happy house" is a facade for a lonely, toxic environment.</p>
                <img src="https://t2.genius.com/unsafe/1458x0/https%3A%2F%2Fimages.genius.com%2Fda5c113dd66b79605b1a74911dbb4576.1000x1000x1.png"
                     alt="House of Balloons Album Art"
                     class="w-40 h-40 md:w-48 md:h-48 album-art reveal reveal-3"
                     onerror="this.onerror=null;this.src='https://placehold.co/256x256/111111/555555?text=HOB';">
            </div>
            <div class="song-list mt-8 reveal reveal-4">
                <!-- All song details are inserted here -->
            </div>
        </div>
    </section>

    <!-- Section 2: Thursday -->
    <section id="thursday" class="section">
        <img src="https://i.postimg.cc/sDD2ShhV/ab6c781b8edf6d7f8ccbaff28d7a26f6.jpg"
             alt="A woman with blonde hair in a bathtub with black balloons." class="background-image"
             onerror="this.onerror=null;this.src='https://placehold.co/1920x1080/000000/333333?text=Image+Not+Found';">
        <div class="vignette"></div>
        <div class="content-wrapper">
             <div class="text-center">
                <h1 class="text-5xl md:text-7xl fancy-title title-thu reveal reveal-1">Thursday</h1>
                <p class="text-lg text-gray-300 mt-4 max-w-xl mx-auto reveal reveal-2">The party's thrill wears off, replaced by routine and manipulation. Relationships are transactional, and he grapples with newfound fame. A specific girl becomes the focus of his manipulative tendencies.</p>
                <img src="https://t2.genius.com/unsafe/1458x0/https%3A%2F%2Fimages.genius.com%2Fa83a29dd26a6e4fe50bba0ef25c7bb19.1000x1000x1.png"
                     alt="Thursday Album Art"
                     class="w-40 h-40 md:w-48 md:h-48 album-art reveal reveal-3"
                     onerror="this.onerror=null;this.src='https://placehold.co/256x256/111111/555555?text=Thursday';">
            </div>
            <div class="song-list mt-8 reveal reveal-4">
                 <!-- All song details are inserted here -->
            </div>
        </div>
    </section>

    <!-- Section 3: Echoes of Silence -->
    <section id="eos" class="section">
        <img src="https://i.postimg.cc/CM41zNdP/favorite-pic-from-the-trilogy-era-v0-8tag4z5ad20d1.jpg"
             alt="A grainy, high-contrast photo of a person's hands amidst white and black balloons." class="background-image"
             onerror="this.onerror=null;this.src='https://placehold.co/1920x1080/000000/333333?text=Image+Not+Found';">
        <div class="vignette"></div>
        <div class="content-wrapper">
             <div class="text-center">
                <h1 class="text-5xl md:text-7xl fancy-title title-eos reveal reveal-1">Echoes of Silence</h1>
                <p class="text-lg text-gray-300 mt-4 max-w-xl mx-auto reveal reveal-2">The comedown. The party is over, leaving the protagonist with regret, paranoia, and emptiness. The hedonism leads to heartbreak and self-destruction, forcing him to confront the monster he's become.</p>
                <img src="https://t2.genius.com/unsafe/1458x0/https%3A%2F%2Fimages.genius.com%2F1d4e1b8dd401906009d931e7a7c6a3bb.1000x1000x1.png"
                     alt="Echoes of Silence Album Art"
                     class="w-40 h-40 md:w-48 md:h-48 album-art reveal reveal-3"
                     onerror="this.onerror=null;this.src='https://placehold.co/256x256/111111/555555?text=EOS';">
            </div>
            <div class="song-list mt-8 reveal reveal-4">
                 <!-- All song details are inserted here -->
            </div>
        </div>
    </section>

</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const sections = Array.from(document.querySelectorAll('.section'));
    const navButtons = document.querySelectorAll('.nav-bar-container button');
    const container = document.querySelector('.container');
    const contentWrappers = document.querySelectorAll('.content-wrapper');
    const detailsElements = document.querySelectorAll('details');
    let isScrolling = false;
    
    // --- Navigation Click Logic ---
    navButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            e.preventDefault();
            const target = document.querySelector(button.dataset.target);
            if (target) {
                isScrolling = true;
                container.scrollTo({ top: target.offsetTop, behavior: 'smooth' });
                setTimeout(() => { isScrolling = false; }, 1000);
            }
        });
    });

    // --- Album Cover Click Logic ---
    const albumLinks = document.querySelectorAll('.album-choice-link');
    albumLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = link.getAttribute('href');
            const target = document.querySelector(targetId);
            if(target) {
                 isScrolling = true;
                container.scrollTo({ top: target.offsetTop, behavior: 'smooth' });
                setTimeout(() => { isScrolling = false; }, 1000);
            }
        });
    });

    // --- Intersection Observer for Active States ---
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            const sectionId = entry.target.id;
            const correspondingNav = document.querySelector(`.nav-bar-container button[data-target="#${sectionId}"]`);
            
            if (entry.isIntersecting) {
                entry.target.classList.add('active');
                navButtons.forEach(b => b.classList.remove('active'));
                if (correspondingNav) {
                    correspondingNav.classList.add('active');
                }
            } else {
                entry.target.classList.remove('active');
            }
        });
    }, { 
        root: container,
        threshold: 0.5
    });

    sections.forEach(section => observer.observe(section));

    // --- Scroll Chaining Logic ---
    contentWrappers.forEach(wrapper => {
        wrapper.addEventListener('wheel', (e) => {
            if (isScrolling || wrapper.closest('#intro')) return;

            const { scrollTop, scrollHeight, clientHeight } = wrapper;
            const currentSection = wrapper.closest('.section');
            const currentIndex = sections.indexOf(currentSection);

            if (e.deltaY > 0 && (scrollTop + clientHeight >= scrollHeight - 5)) {
                e.preventDefault();
                const nextIndex = currentIndex + 1;
                if (nextIndex < sections.length) {
                    isScrolling = true;
                    container.scrollTo({ top: sections[nextIndex].offsetTop, behavior: 'smooth' });
                    setTimeout(() => { isScrolling = false; }, 1000);
                }
            } else if (e.deltaY < 0 && scrollTop === 0) {
                e.preventDefault();
                const prevIndex = currentIndex - 1;
                if (prevIndex >= 0) {
                    isScrolling = true;
                    container.scrollTo({ top: sections[prevIndex].offsetTop, behavior: 'smooth' });
                    setTimeout(() => { isScrolling = false; }, 1000);
                }
            }
        }, { passive: false });
    });

    // --- Details Collapse/Expand Animation ---
    detailsElements.forEach(details => {
        const summary = details.querySelector('summary');
        const content = details.querySelector('.details-content');

        if (summary && content) {
            summary.addEventListener('click', (e) => {
                e.preventDefault();
                
                if (details.open) {
                    content.classList.add('collapsing');
                    content.addEventListener('animationend', () => {
                        details.removeAttribute('open');
                        content.classList.remove('collapsing');
                    }, { once: true });
                } else {
                    details.setAttribute('open', '');
                }
            });
        }
    });
});
</script>

</body>
</html>
